{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/auth/loginDashboard":{"post":{"operationId":"AuthController_loginDashboard","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Resposta de autenticação. Contém token de acesso, token de atualização e dados do usuário autenticado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAuthDto"}}}},"403":{"description":"Senha incorreta","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedException"}}}},"404":{"description":"Usuário não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Auth"]}},"/auth/loginMobile":{"post":{"operationId":"AuthController_loginMobile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Resposta de autenticação. Contém token de acesso, token de atualização e dados do usuário autenticado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAuthDto"}}}},"403":{"description":"Senha incorreta","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedException"}}}},"404":{"description":"Usuário não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Auth"]}},"/auth/refreshToken":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenDto"}}}},"responses":{"201":{"description":"Token de autenticação atualizado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAuthDto"}}}}},"tags":["Auth"]}},"/auth/userAuth":{"get":{"operationId":"AuthController_getUserAuth","parameters":[],"responses":{"200":{"description":"Usuário autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAuth"}}}}},"tags":["Auth"]}},"/users":{"post":{"operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"409":{"description":"E-mail já cadastrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictException"}}}}},"tags":["Users"]},"get":{"operationId":"UsersController_getAllUsers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}},"tags":["Users"]}},"/users/{email}":{"get":{"operationId":"UsersController_getByEmail","parameters":[{"name":"email","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"Usuário não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Users"]}},"/companies":{"get":{"operationId":"CompaniesController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Company"}}}}}},"tags":["Companies"]},"post":{"operationId":"CompaniesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCompanyDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Company"}}}},"409":{"description":"CNPJ já cadastrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictException"}}}}},"tags":["Companies"]}},"/companies/{id}":{"get":{"operationId":"CompaniesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Company"}}}},"404":{"description":"Empresa não encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Companies"]},"put":{"operationId":"CompaniesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCompanyDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Company"}}}},"404":{"description":"Empresa não encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Companies"]},"delete":{"operationId":"CompaniesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""},"404":{"description":"Empresa não encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Companies"]}},"/employees":{"post":{"operationId":"EmployeesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEmployeeDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEmployeeResponse"}}}},"409":{"description":"Registro já cadastrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictException"}}}}},"tags":["Employees"]},"get":{"operationId":"EmployeesController_findList","parameters":[{"name":"query","required":false,"in":"query","description":"Query de busca","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","description":"Limite de registros por página","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","description":"Página de registros","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Employee"}}}}},"tags":["Employees"]}},"/checklists":{"post":{"operationId":"ChecklistsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckListDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckList"}}}}},"tags":["Checklists"]},"get":{"operationId":"ChecklistsController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Checklist"}}}}}},"tags":["Checklists"]}},"/checklists/{id}":{"get":{"operationId":"ChecklistsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Checklist"}}}}},"404":{"description":"Registro não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Checklists"]},"put":{"operationId":"ChecklistsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChecklistDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Checklist"}}}},"404":{"description":"Registro não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Checklists"]},"delete":{"operationId":"ChecklistsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""},"404":{"description":"Registro não encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Checklists"]}},"/roles":{"get":{"operationId":"RolesController_findList","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Roles"}}}}},"401":{"description":"Usuário não autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedException"}}}}},"tags":["Roles"]}},"/categories":{"get":{"operationId":"CategoriesController_findList","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Categories"}}}}},"401":{"description":"Usuário não autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedException"}}}}},"tags":["Categories"]},"post":{"operationId":"CategoriesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoriesDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Categories"}}}},"401":{"description":"Usuário não autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedException"}}}},"409":{"description":"Registro já cadastrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictException"}}}}},"tags":["Categories"]}}},"info":{"title":"Indicador Online API","description":"Documentação da API usando Swagger","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http","in":"header"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"usuario@example.com","description":"Endereço de e-mail do usuário"},"password":{"type":"string","example":"senha123","description":"Senha do usuário (mínimo 4 caracteres)","minLength":4}},"required":["email","password"]},"UserAuth":{"type":"object","properties":{"id":{"type":"string","example":"1","description":"ID do usuário"},"name":{"type":"string","example":"Usuário","description":"Nome do usuário"},"email":{"type":"string","description":"Email do funcionário"},"role":{"type":"string","example":"user","description":"Função do usuário"}},"required":["id","name","email","role"]},"ResponseAuthDto":{"type":"object","properties":{"access_token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9","description":"Token de acesso"},"refresh_token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9","description":"Token de atualização"},"user":{"example":{"id":"1","name":"Usuário","email":"usuario@example.com","role":"user"},"description":"Dados do usuário autenticado","allOf":[{"$ref":"#/components/schemas/UserAuth"}]}},"required":["access_token","refresh_token","user"]},"UnauthorizedException":{"type":"object","properties":{}},"NotFoundException":{"type":"object","properties":{}},"TokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9","description":"Token de atualização"}},"required":["refreshToken"]},"User":{"type":"object","properties":{"id":{"type":"string","example":"John Doe","description":"Nome do usuário"},"email":{"type":"string","example":"johndoe@example.com","description":"Email do usuário"},"password":{"type":"string","example":"senha123","description":"Senha do usuário"},"name":{"type":"string","example":"John Doe","description":"Nome do usuário (opcional)"},"role":{"type":"string","example":"admin","description":"Papel do usuário (opcional)"},"created_at":{"format":"date-time","type":"string","example":"2023-01-01T00:00:00.000Z","description":"Data de criação do usuário (opcional)"},"updated_at":{"format":"date-time","type":"string","example":"2023-01-02T00:00:00.000Z","description":"Data de atualização do usuário (opcional)"}},"required":["id","email","password","name","role","created_at","updated_at"]},"ConflictException":{"type":"object","properties":{}},"Company":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"ID da empresa"},"name":{"type":"string","example":"Empresa XYZ","description":"Nome da empresa"},"email":{"type":"string","example":"emprese@empresa.com","description":"Email da empresa"},"cnpj":{"type":"string","example":"12.345.678/0001-99","description":"CNPJ da empresa"},"isActive":{"type":"boolean","example":true,"description":"Se a empresa está ativa"},"checklistIds":{"example":[101,102,103],"description":"IDs dos checklists associados à empresa","type":"array","items":{"type":"number"}},"created_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Data de criação da empresa"},"updated_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Última atualização da empresa"},"role_id":{"type":"string","description":"Id do Nível de acesso da empresa"},"password":{"type":"string","description":"Senha da empresa"}},"required":["id","name","email","cnpj","isActive","checklistIds","role_id","password"]},"CreateCompanyDto":{"type":"object","properties":{"name":{"type":"string","example":"Empresa XYZ","description":"Nome da empresa"},"cnpj":{"type":"string","example":"12.345.678/0001-99","description":"CNPJ da empresa"},"isActive":{"type":"boolean","example":true,"description":"Se a empresa está ativa ou não"},"email":{"type":"string","description":"Email da empresa"},"checklistIds":{"example":[101,102,103],"description":"IDs dos checklists associados à empresa","type":"array","items":{"type":"number"}},"roleId":{"type":"string","example":"1","description":"ID do nível de acesso associada à empresa"}},"required":["name","cnpj","isActive","email","checklistIds","roleId"]},"UpdateCompanyDto":{"type":"object","properties":{"name":{"type":"string","example":"Empresa XYZ","description":"Nome da empresa"},"cnpj":{"type":"string","example":"12.345.678/0001-99","description":"CNPJ da empresa"},"isActive":{"type":"boolean","example":true,"description":"Se a empresa está ativa ou não"},"checklistIds":{"example":[101,102,103],"description":"IDs dos checklists associados à empresa","type":"array","items":{"type":"number"}}},"required":["name","cnpj","isActive","checklistIds"]},"CreateEmployeeDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome do funcionário"},"email":{"type":"string","description":"Email do funcionário"},"phone":{"type":"string","description":"Telefone do funcionário"},"company_id":{"type":"number","description":"ID da empresa do funcionário"},"roleId":{"type":"string","description":"Id do nível do funcionário"}},"required":["name","email","phone","company_id","roleId"]},"CreateEmployeeResponse":{"type":"object","properties":{"id":{"type":"number","description":"Id do funcionário"},"name":{"type":"string","description":"Nome do funcionário"},"email":{"type":"string","description":"Email do funcionário"},"company_id":{"type":"number","description":"ID da empresa do funcionário"},"phone":{"type":"string","description":"Telefone do funcionário"}},"required":["id","name","email","company_id","phone"]},"Employee":{"type":"object","properties":{"id":{"type":"number","description":"Id do funcionário"},"name":{"type":"string","description":"Nome do funcionário"},"email":{"type":"string","description":"Email do funcionário"},"phone":{"type":"string","description":"Telefone do funcionário"},"company_id":{"type":"number","description":"ID da empresa do funcionário"},"password":{"type":"string","description":"Senha do funcionário"},"role_id":{"type":"string","description":"Id do nível do funcionário"}},"required":["id","name","email","phone","company_id","password","role_id"]},"CheckListMultipleChoiceDto":{"type":"object","properties":{"choice":{"type":"string","description":"Escolha"},"anomaly":{"type":"string","description":"É anomalia","enum":["LOW","MEDIUM","HIGH"],"nullable":true}},"required":["choice","anomaly"]},"CheckListQuestionsDto":{"type":"object","properties":{"question":{"type":"string","description":"Pergunta"},"answerType":{"type":"string","description":"Tipo de resposta esperada para a pergunta","enum":["Text","Image","IA"]},"type":{"type":"string","description":"Tipo da pergunta","enum":["Texto","Múltipla escolha","Upload de arquivo"]},"isRequired":{"type":"boolean","description":"É obrigatória"},"iaPrompt":{"type":"string","description":"Prompt da IA"},"multiple_choice":{"description":"questions","type":"array","items":{"$ref":"#/components/schemas/CheckListMultipleChoiceDto"}}},"required":["question","answerType","type","isRequired"]},"CreateCheckListItemDto":{"type":"object","properties":{"categoriesId":{"type":"string","description":"categories_id"},"question_list":{"description":"Lista de perguntas","type":"array","items":{"$ref":"#/components/schemas/CheckListQuestionsDto"}}},"required":["categoriesId","question_list"]},"CreateCheckListDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome do checklist","example":"Checklist de Segurança"},"expiries_in":{"format":"date-time","type":"string","example":"2023-10-01T00:00:00.000Z","description":"Data de expiração"},"checkListItem":{"description":"CheckListItem","example":[{"categoriesId":"string","question_list":[{"question":"O carro está sujo?","type":"Múltipla escolha","isRequired":true,"answerType":"Text","multiple_choice":[{"choice":"Sim","anomaly":"MEDIUM"},{"choice":"Não"}]},{"question":"Os vidros estão limpos?","type":"Texto","answerType":"Text","isRequired":true,"multiple_choice":[],"iaPrompt":"Verifique se de acordo com a resposta do funcionário \"Os vidros estão limpos\". Caso não esteja, responda: Alerta de anomalia. Caso esteja, responda: Ok."}]},{"categoriesId":"string","question_list":[{"question":"O motor está em bom estado?","type":"Múltipla escolha","isRequired":true,"answerType":"Text","multiple_choice":[{"choice":"Sim"},{"choice":"Não","anomaly":"MEDIUM"},{"choice":"N/A","anomaly":"MEDIUM"}]},{"question":"O freio está funcionando?","type":"Texto","answerType":"Text","isRequired":true,"multiple_choice":[],"iaPrompt":"Verifique se de acordo com a resposta do funcionário o freio está funcionando corretamente. Caso não esteja, responda: Alerta de anomalia. Caso esteja, responda: Ok."}]}],"type":"array","items":{"$ref":"#/components/schemas/CreateCheckListItemDto"}}},"required":["name","expiries_in","checkListItem"]},"CheckList":{"type":"object","properties":{"id":{"type":"string","description":"ID do check List"},"name":{"type":"string","description":"Nome do checklist"},"expiries_in":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Data de expiração"},"created_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Data de criação"},"updated_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Última atualização"}},"required":["id","name","expiries_in","created_at","updated_at"]},"Question":{"type":"object","properties":{"questionText":{"type":"string","example":"Qual é a sua idade?","description":"Texto da pergunta"},"questionType":{"type":"string","example":"multiple-choice","description":"Tipo da pergunta","enum":["multiple-choice","text","boolean"]},"options":{"example":["Opção 1","Opção 2"],"description":"Opções disponíveis para a pergunta","type":"array","items":{"type":"string"}},"isRequired":{"type":"boolean","example":true,"description":"Define se a pergunta é obrigatória"},"position":{"type":"number","example":1,"description":"Posição da pergunta na categoria"}},"required":["questionText","questionType","isRequired","position"]},"Category":{"type":"object","properties":{"categoryName":{"type":"string","example":"Categoria de Segurança","description":"Nome da categoria"},"questions":{"description":"Lista de perguntas dentro da categoria","type":"array","items":{"$ref":"#/components/schemas/Question"}}},"required":["categoryName","questions"]},"Checklist":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"ID único do checklist"},"name":{"type":"string","example":"Checklist de Segurança","description":"Nome do checklist"},"categories":{"description":"Lista de categorias dentro do checklist","type":"array","items":{"$ref":"#/components/schemas/Category"}},"created_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Data de criação"},"updated_at":{"format":"date-time","type":"string","example":"2024-03-27T12:00:00Z","description":"Última atualização"}},"required":["id","name","categories"]},"QuestionDto":{"type":"object","properties":{"questionText":{"type":"string","example":"Qual é a sua idade?","description":"Texto da pergunta"},"questionType":{"type":"string","example":"multiple-choice","description":"Tipo da pergunta","enum":["Upload de arquivo","Múltipla escolha","Texto"]},"options":{"description":"Opções da pergunta","type":"array","items":{"type":"string"}},"isRequired":{"type":"boolean","example":true,"description":"Indica se a pergunta é obrigatória"},"position":{"type":"number","example":1,"description":"Posição da pergunta"}},"required":["questionText","questionType","options","isRequired","position"]},"CategoryDto":{"type":"object","properties":{"categoryName":{"type":"string","example":"Categoria de Segurança","description":"Nome da categoria"},"questions":{"description":"Lista de perguntas dentro da categoria","type":"array","items":{"$ref":"#/components/schemas/QuestionDto"}}},"required":["categoryName","questions"]},"UpdateChecklistDto":{"type":"object","properties":{"name":{"type":"string","example":"Checklist de Segurança","description":"Nome do checklist"},"categories":{"description":"Lista de categorias do checklist","type":"array","items":{"$ref":"#/components/schemas/CategoryDto"}}},"required":["name","categories"]},"Roles":{"type":"object","properties":{"id":{"type":"string","description":"Id do nível de acesso"},"name":{"type":"string","description":"Nome do nível de acesso"},"created_at":{"format":"date-time","type":"string","description":"Data de criação"},"updated_at":{"format":"date-time","type":"string","description":"Data de atualização"}},"required":["id","name","created_at","updated_at"]},"Categories":{"type":"object","properties":{"id":{"type":"string","description":"Id da categoria de acesso"},"name":{"type":"string","description":"Nome da categoria de acesso"},"created_at":{"format":"date-time","type":"string","description":"Data de criação"},"updated_at":{"format":"date-time","type":"string","description":"Data de atualização"}},"required":["id","name","created_at","updated_at"]},"CreateCategoriesDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome da categoria de acesso"}},"required":["name"]}}},"security":[{"bearer":[]}]}